# rekishi

> SaaSアプリケーションに監査ログ機能を提供するOSS/Cloudサービス

## 概要

rekishiは、SaaSアプリケーションの利用企業が「誰が・いつ・何をしたか」を把握できる監査ログ基盤を提供する。OSSとしてセルフホスト可能であり、マネージドCloud版も提供する。

## 誰のためのプロダクトか

SaaSを利用するエンドユーザー企業のコンプライアンス・セキュリティ担当者が主な利用者。企業が利用するSaaSにrekishiが組み込まれることで、操作履歴の確認・監査対応・セキュリティインシデントの調査が可能になる。

## 登場人物と関係

```
SaaS開発者 → rekishiを自社SaaSに組み込む
                ↓
エンドユーザー企業 → 監査ログを閲覧・エクスポート・監査対応に利用
```

- **SaaS開発者** — rekishiのAPIを呼び出し、自社SaaSの操作を監査ログとして記録する
- **エンドユーザー企業** — SaaS上で監査ログを閲覧・検索・エクスポートし、コンプライアンスやセキュリティに活用する

## 提供形態

- **OSS** — セルフホスト可能。自社インフラで監査ログ基盤を運用できる
- **Cloud** — マネージドサービス。ダッシュボードによるデータの可視化・分析を含む

## 主な機能

- **イベント記録・検索** — 誰が・いつ・何をしたかを構造化して記録し、柔軟に検索・フィルタリングできる
- **エクスポート・外部連携** — 監査ログデータをCSV/JSON等でエクスポート、SIEM等の外部サービスと連携できる
- **Audit Log UI** — 監査ログの閲覧・検索UI（OSS/Cloud共通）
- **ダッシュボード** — 監査ログの可視化・分析（Cloud版のみ）

## ドメイン用語

監査ログの1件のイベントは以下の要素で構成される。

- **Actor** — 操作を行った人（誰が）
- **Action** — 実行された操作（何をしたか）
- **Target** — 操作の対象リソース（何に対して）
- **Timestamp** — 操作が行われた日時（いつ）

## 設計方針

- **改ざん不可（Immutability）** — 一度記録されたイベントは変更・削除できない
- **保持期間（Retention）** — データの保持期間を設定可能
- **マルチテナント** — テナント間のデータを安全に分離
- **高可用性・スケーラビリティ** — 大量のイベントを止まらず処理できる
